<article>
<div class="wrapper">
    <i id="left" class="fa-regular fa-angle-left"></i>
    <div class="carousel">
        <img src="public/instabanner/insta1.jpg" alt="img" draggable="false">
        <img src="public/instabanner/insta2.jpg" alt="img" draggable="false">
        <img src="public/instabanner/insta3.jpg" alt="img" draggable="false">
        <img src="public/instabanner/insta4.jpg" alt="img" draggable="false">
        <img src="public/instabanner/insta5.jpg" alt="img" draggable="false">
        <img src="public/instabanner/insta6.jpg" alt="img" draggable="false">
        <img src="public/instabanner/insta1.jpg" alt="img" draggable="false">
        <img src="public/instabanner/insta2.jpg" alt="img" draggable="false">
        <img src="public/instabanner/insta3.jpg" alt="img" draggable="false">
    </div>
    <i id="right" class="fa-regular fa-angle-right"></i>
</div>
</article>

<style>


*{
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

article {
        display: flex;
        padding: 0 35px;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
    }


    .wrapper {
        max-width: 1200px;
        position: relative;
    }

    .wrapper i {
        top: 50%;
        height: 30px;
        width: 30px;
        text-align: center;
        line-height: 46px;
        background: #fff;
        border-radius: 50%;
        cursor: pointer;
        position: absolute;
        font-size: 1.2rem;
        transform: translateY(-50%);

    }

    .wrapper i:first-child {
        left:-23px;
        display: none;
    } 

    .wrapper i:last-child {
        right:-23px;
    } 

    .wrapper .carousel {
        font-size: 0px;
        cursor: pointer;
        overflow: hidden;
        white-space: nowrap;
        scroll-behavior: smooth;
    }

    .carousel .dragging {
        cursor: grab;
        scroll-behavior: auto;

    }

    .carousel .dragging img {
        pointer-events:none;
    }

    .carousel img {
        height: 400px;
        object-fit: cover;
        margin-left: 14px;
        width: calc(100% / 3);
    }

    .carousel img:first-child {
        margin-left: 0px;
    }


@media screen and (max-width: 900px) {

.carousel img {
    width: calc(100% / 2);
}

}

@media screen and (max-width: 550px) {

    .carousel img {
        width: 100%;
    }

}

</style>

<script>

    const carousel = document.querySelector(".carousel"),
    firstImg = carousel.querySelectorAll("img")[0],
    arrowIcons = document.querySelectorAll(".wrapper i");

    let isDragStart = false, isDragging = false, prevPageX, prevScrollLeft, positionDiff;


    const showHideIcons = () => {
        let scrollWidth = carousel.scrollWidth - carousel.clientWidth;
        arrowIcons[0].style.display = carousel.scrollLeft == 0 ? "none" : "block";
        arrowIcons[1].style.display = carousel.scrollLeft == scrollWidth ? "none" : "block";
    }

    arrowIcons.forEach(icon => {
        icon.addEventListener("click", () =>  {
            let firstImgWidth = firstImg.clientWidth + 14;
            carousel.scrollLeft += icon.id == "left" ? -firstImgWidth : firstImgWidth;
            setTimeout(() => showHideIcons(), 60);
        });
    });

    const autoSlide = () => {
        if(carousel.scrollLeft == (carousel.scrollWidth - carousel.clientWidth)) return;


        positionDiff = Math.abs(positionDiff);
        let firstImgWidth = firstImg.clientWidth + 14;
        let valDifference = firstImgWidth - positionDiff;

        if(carousel.scrollLeft > prevScrollLeft) {
            return carousel.scrollLeft += positionDiff > firstImgWidth / 3 ? valDifference : -positionDiff;
        }

        return carousel.scrollLeft -= positionDiff > firstImgWidth / 3 ? valDifference : -positionDiff;
    }

    const dragStart = (e) => {
        isDragStart = true;
        prevPageX = e.pageX || e.touches[0].pageX;
        prevScrollLeft = carousel.scrollLeft;
    }

    const dragging = (e) => {
        if(!isDragStart) return;
        e.preventDefault();
        isDragging = true;
        carousel.classList.add("dragging");
        positionDiff = (e.pageX || e.touches[0].pageX) - prevPageX;
        carousel.scrollLeft = prevScrollLeft - positionDiff;
        showHideIcons();
    }

    const dragStop = () => {
        isDragStart = false;
        carousel.classList.remove("dragging");

        if(!isDragging) return;
        isDragging = false;
        autoSlide();
    }

    carousel.addEventListener("mousedown", dragStart);
    carousel.addEventListener("touchstart", dragStart);

    carousel.addEventListener("mousemove", dragging);
    carousel.addEventListener("touchmove", dragging);

    carousel.addEventListener("mouseup", dragStop);
    carousel.addEventListener("mouseleave", dragStop);
    carousel.addEventListener("touchend", dragStop);

</script>